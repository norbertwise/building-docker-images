pipeline{
    agent{
        docker{
            image 'node:19-alpine'
        }
    }
stages{
    stage('git code'){
        steps{
            git branch : 'main' , url : 'https://github.com/norbertwise/building-docker-images.git'                                   
        }
    }



stage('docker build and push'){
    steps{
       
withCredentials([usernamePassword(credentialsId: 'dockerbuild', passwordVariable: 'dockerHubPassword', usernameVariable: 'dockerHubUser')]) {
          sh "docker login -u ${env.dockerHubUser} -p ${env.dockerHubPassword}"
            
      sh "docker build -t web-app:latest ."
      
      }


       }
    }

}


}








