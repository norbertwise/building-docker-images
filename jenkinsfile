pipeline{

	agent {
        docker{
            image 'node:19-alpine'
        }
	}
	stages {
	    
	    stage('checkout') {

			steps {
				checkout scmGit(branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/norbertwise/building-docker-images.git']])
			}
		}

		stage(' docker build') {
			steps{
				scripts{
					withCredentials([usernamePassword(credentialsId: 'docker_cred', passwordVariable: 'dockerhubpasswd', usernameVariable: 'dockerhubusername')]) {
						sh 'docker login -u dockerhubusername -p dockerhubpasswd'
						sh 'docker build -t dockapp:v1.12 .'
						sh 'docker push patnorbs/dockapp:v1.12'
						}
				}
			}
		}

			
			
				
			
		}

	}

